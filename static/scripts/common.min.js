(function($){$.fn.minus=function(){$(this).html($(this).html().replace(/[+]/i,"−"));return this};$.fn.plus=function(){$(this).html($(this).html().replace(/[−]/i,"+"));return this};$.fn.collapseGroup=function(){var thisContexts=$(this);return this.each(function(){var $this=$(this);var $next=$this.next();$this.click(function(){if($next.is(":hidden")){$this.minus();$next.slideDown()}else{$this.plus();$next.slideUp()}thisContexts.not($this).each(function(){$(this).plus();$(this).next().slideUp()})})})};$.fn.slugify=function(options){var opts=$.extend({},slugifyDefaults,options);var output=$(opts.slug);$(this).blur(function(){$(output).val(URLify($(this).val(),opts.max))});return this};slugifyDefaults={max:50,slug:"#slug:enabled"};$.fn.focusHighlight=function(options){var opts=$.extend({},focusHighlightDefaults,options);return this.each(function(){var para=$(this).parents("p");$(this).focus(function(){$(para).addClass(opts.highlightClass)}).blur(function(){$(para).removeClass(opts.highlightClass)})})};focusHighlightDefaults={highlightClass:"focus"};$.fn.colStyle=function(){return this.each(function(){var table=$(this);var styles=$.map($("col",table),function(e){return $(e).attr("style")||""});if(styles.length>0){$("thead th",table).each(function(i,eth){var style=$(eth).attr("style")||"";style+=styles[i];if(style!="")$(eth).attr("style",style)});$("tbody tr",table).each(function(i,etr){$("td",etr).each(function(i,etd){var style=$(etd).attr("style")||"";style+=styles[i];if(style!="")$(etd).attr("style",style)})})}})};$.fn.copyright=function(src){var canvas=this[0];var cntx=canvas.getContext("2d");var img=new Image;img.src=src;img.onload=function(){$(canvas).attr("width",this.width).attr("height",this.height);cntx.drawImage(img,0,0,this.width,this.height);var width_factor=this.width/$(canvas).width();var height_factor=this.height/$(canvas).height();cntx.font=16*width_factor+'px "PT Sans"';cntx.fillStyle="#fff";cntx.shadowColor="#000";cntx.shadowOffsetX=0;cntx.shadowOffsetY=0;cntx.shadowBlur=5;cntx.fillText("© ands.appspot.com",this.width-160*width_factor,30*height_factor)};return canvas};$(".modal").on("click",".close",function(evt){evt.preventDefault();$(this).parents(".modal").hide();$("#overlay").hide()});$("#menu").click(function(evt){evt.preventDefault();if($(".menu").css("left")!="0px"){$(".menu").css("left","0px");$("#main").css("left","50%")}else{$(".menu").css("left","-50%");$("#main").css("left","0px")}});$(".menu").click(function(evt){var disallow={A:1,BUTTON:1,INPUT:1};var parnetTagName=$(evt.target).parent()[0].tagName;if(!(disallow[evt.target.tagName]||disallow[parnetTagName])){evt.preventDefault()}$(".menu").css("left","-50%")});$("#searchForm").submit(function(){$("#overlay, #spinner").show()});$("a.confirm").click(function(evt){evt.preventDefault();$("#confirm").load(this.href,function(){$("#overlay, #confirm").show();$(".content button").click(function(){$("#overlay, #spinner").show()})})});$("a.comment_add").click(function(evt){evt.preventDefault();$("#addcomment").load(this.href,function(){$("#overlay, #addcomment").show();$("#body").markItUp(cmntSettings,{nameSpace:"small"});$(".content button").click(function(evt){evt.preventDefault();$.ajax({type:"POST",url:$("#addcommentForm").attr("action"),data:{body:$("#body").val(),token:token},success:function(data){if(typeof data=="string"){$(".dummy").hide();$(".info").show();$(".comments").prepend(data);$("a.confirm").click(function(e){e.preventDefault();$("#confirm").load(this.href,function(){$("#overlay, #confirm").show()})});setTimeout(function(){$("#overlay, #addcomment").hide()},1e3)}else{$(".error").text("");$.each(data,function(key,arr){$(".error.C_"+key).text(arr.join(", "))})}}})})})})})(jQuery);
//# sourceMappingURL=common.js.map