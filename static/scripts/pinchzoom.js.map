{"version":3,"file":"pinchzoom.min.js","sources":["pinchzoom.js"],"names":["definePinchZoom","$","PinchZoom","el","options","this","zoomFactor","lastScale","offset","x","y","extend","defaults","setupMarkup","bindEvents","update","enable","sum","a","b","isCloseTo","value","expected","prototype","tapZoomFactor","zoomOutFactor","animationDuration","animationInterval","maxZoom","minZoom","lockDragAxis","use2d","zoomStartEventName","zoomEndEventName","dragStartEventName","dragEndEventName","doubleTapEventName","handleDragStart","event","trigger","stopAnimation","lastDragPosition","hasInteraction","handleDrag","touch","getTouches","drag","sanitizeOffset","handleDragEnd","end","handleZoomStart","nthZoom","lastZoomCenter","handleZoom","newScale","touchCenter","getTouchCenter","scale","handleZoomEnd","handleDoubleTap","center","startZoomFactor","updateProgress","progress","scaleTo","bind","getCurrentZoomCenter","animate","swing","maxX","getContainerX","maxY","getContainerY","maxOffsetX","Math","max","maxOffsetY","minOffsetX","min","minOffsetY","scaleZoomFactor","addOffset","originalZoomFactor","lastCenter","abs","touches","getVectorAvg","vectors","map","v","reduce","length","sanitize","zoomOutAnimation","isInsaneOffset","sanitizeOffsetAnimation","sanitizedOffset","targetOffset","startOffset","updateAspectRatio","setContainerY","getAspectRatio","getInitialZoomFactor","container","offsetWidth","offsetHeight","offsetLeft","offsetRight","widthOffsetRatio","centerX","height","offsetTop","offsetBottom","heightOffsetRatio","centerY","canDrag","position","Array","slice","call","pageX","left","pageY","top","duration","interval","framefn","timefn","callback","startTime","Date","getTime","renderFrame","inAnimation","frameTime","setTimeout","p","cos","PI","before","append","css","overflow","-webkit-transform-origin","-moz-transform-origin","-ms-transform-origin","-o-transform-origin","transform-origin","detectGestures","get","window","on","find","updatePlaned","offsetX","offsetY","transform3d","transform2d","removeClone","clone","remove","is3d","-webkit-transform","-o-transform","-ms-transform","-moz-transform","transform","appendTo","enabled","disable","target","interaction","fingers","lastTouchStart","startTouches","setInteraction","newInteraction","updateInteraction","targetTouches","getDistance","sqrt","calculateScale","endTouches","startDistance","endDistance","cancelEvent","stopPropagation","preventDefault","detectDoubleTap","time","firstMove","addEventListener","define","amd","RTP"],"mappings":"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"}