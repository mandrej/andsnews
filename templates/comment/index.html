{% extends "comment/base.html" %}
{% load tags i18n %}
{% block title %}
	{{ block.super }} - {% trans 'Comments' %}
{% endblock %}

{% block subnav %}&nbsp;{% endblock %}

{% block contents %}
	{% if objects %}
		<h2><a href="/comments">{% trans 'Comments' %}</a>{% if filter %}{{ filter_title }}{% endif %}{% if page != 1 %} [{{ page }}]{% endif %}</h2>
	{% else %}
		<h2>{% trans 'No comments' %}</h2>
		{% popup noresults %}
			<p>{% trans 'No comments sent'%}, {% trans 'or filter has no results' %}.</p>
		{% endpopup %}
	{% endif %}
	
	<div id="container">
		{% for object in objects %}
	    	{% if object.is_message %}
	    		<section class="third brick">
	    			<time class="when" datetime='{{ object.date|date:"Y-m-d\TH:i:sO" }}'>
	                    <span class="day">{{ object.date|date:"d" }}</span>
	                    <span class="time">{{ object.date|date:"H:i" }}</span>
	                    <span class="monthyear">{{ object.date|date:"m 'y" }}</span>
	                </time>
	    			<div class="white old">
		                <h3>{% trans 'message' %}</h3>
		                <div class="body">{{ object.body|safe }}</div>
		                <p class="posted">{{ object.author }},
		                    {% blocktrans with object.date|timesince as since %}{{ since }} ago{% endblocktrans %}</p>
					</div>
				</section>
	        {% else %}
	    		{% with object.key.parent.get as parent %}
	    		<section class="third brick">
	    			<time class="when" datetime='{{ object.date|date:"Y-m-d\TH:i:sO" }}'>
						<span class="day">{{ object.date|date:"d" }}</span>
						<span class="time">{{ object.date|date:"H:i" }}</span>
						<span class="monthyear">{{ object.date|date:"m 'y" }}</span>
					</time>
					<div class="white">
						<h3><a href="{{ parent.get_absolute_url }}#comments">{{ parent.headline }}</a></h3>
						<div class="body">{{ object.body|safe }}</div>
						<p class="posted">{{ object.author }},
							{% blocktrans with object.date|timesince as since %}{{ since }} ago{% endblocktrans %}</p>
					</div>
				</section>
				{% endwith %}
	        {% endif %}
		{% endfor %}
	</div>
{% endblock %}
