{% extends "comment/base.html" %}

{% block title %}
	{{ super() }} - {{ _('Comments') }}
{% endblock %}

{% block subnav %}&nbsp;{% endblock %}

{% block contents %}
	{% if objects %}
		<h2><a href="{{ uri_for('comments') }}">{{ _('Comments') }}</a>{% if filter %}{{ filter_title }}{% endif %}{% if page != 1 %} [{{ page }}]{% endif %}</h2>
	{% else %}
		<h2>{{ _('No comments sent') }}, {{ _('or filter has no results') }}.</h2>
	{% endif %}
	
	<div id="container">
		{% for object in objects %}
	    	{% if object.is_message %}
	    		<section class="third brick">
	    			<time class="when" datetime='{{ object.date|format_datetime }}'>
	                    <span class="day">{{ object.date|format_datetime("%d") }}</span>
	                    <span class="time">{{ object.date|format_datetime("%H:%M") }}</span>
	                    <span class="monthyear">{{ object.date|format_datetime("%m '%y") }}</span>
	                </time>
	    			<div class="white old">
		                <h3>{{ _('message') }}</h3>
		                <div class="body">{{ object.body|safe }}</div>
		                <p class="posted">{{ object.author }},
		                    {% trans since=object.date|timesince %}{{ since }} ago{% endtrans %}
                        </p>
					</div>
				</section>
	        {% else %}
	    		<section class="third brick">
                    <time class="when" datetime='{{ object.date|format_datetime }}'>
                        <span class="day">{{ object.date|format_datetime("%d") }}</span>
                        <span class="time">{{ object.date|format_datetime("%H:%M") }}</span>
                        <span class="monthyear">{{ object.date|format_datetime("%m '%y") }}</span>
                    </time>
					<div class="white">
                        {% with refkey=object.key.parent() %}
						<h3><a href="{{ uri_for(refkey.kind().lower(), slug=refkey.string_id()) }}#comments">
                            {{ refkey.get().headline }}</a></h3>
						<div class="body">{{ object.body|safe }}</div>
						<p class="posted">{{ object.author }},
                            {% trans since=object.date|timesince %}{{ since }} ago{% endtrans %}
                        </p>
                        {% endwith %}
					</div>
				</section>
	        {% endif %}
		{% endfor %}
	</div>
{% endblock %}
