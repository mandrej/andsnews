{% extends "base.html" %}
{% block nav %}
    <ul class="fa-ul">
        <li><a href="{{ uri_for('photo_all', page=1) }}" title="{{ _('Photos') }}"><i class="fa fa-camera"></i></a></li>
        <li><a href="{{ uri_for('entry_all', page=1) }}" title="{{ _('Blog') }}"><i class="fa fa-file-text"></i></a></li>
        <li><a href="{{ uri_for('comment_all', page=1) }}" title="{{ _('Comments') }}"><i class="fa fa-comment"></i></a></li>
        <li class="active"><a href="{{ uri_for('feed_all', page=1) }}" title="{{ _('News') }}"><i class="fa fa-rss-square"></i></a></li>
        {% if user %}
            <li><a href="/admin/" title="{{ _('Administration') }}"><i class="fa fa-cog"></i></a></li>
        {% else %}
            <li><a href="/sign" title="{{ _('Log in') }}"><i class="fa fa-sign-in"></i></a></li>
        {% endif %}
    </ul>

    {% set _tags = {'field': 'tags', 'title': _('Tags')} %}

    <h3>{{ _('News') }}</h3>
    <div class="submenu">
        {% for f in [_tags] %}
            <a class="{{ f.field }} block collapse" href="/filter/Feed_{{ f.field }}">{{ f.title }} [+]</a>
            <div id="{{ f.field }}cloud" class="hide"></div>
        {% endfor %}
    </div>
    <script>
        $(function () {
            var filter = {{ filter|to_json }};
            if (filter) {
                $('.hide').hide();
                $('.collapse').each(function() {
                    $(this).plus();
                });
                $.ajax({
                    url: '/filter/Feed_' + filter.field + '/' + filter.value,
                    context: $('#' + filter.field + 'cloud'),
                    success: function(snippet) {
                        $(this).html(snippet).slideDown();
                        $('.' + filter.field).minus();
                    }
                });
            }
        });
    </script>
{% endblock %}