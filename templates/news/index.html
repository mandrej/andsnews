{% extends "news/base.html" %}
{% block title %}{{ super() }} - {{ _('News') }}{% endblock %}

{% block contents %}
    <div class="page">
        {% import "snippets/macros.html" as m %}
        <header>
            <h2>
                <a href="{{ uri_for('feed_all') }}">{{ _('News') }}</a>
                {{ m.filter_title(filter) }}
            </h2>
        </header>
        <article class="cols">
            {% for object in objects %}
                {% if object %}
                    <section>
                        {% if object.date %}{{ m.time(object.date) }}{% endif %}
                        <div class="body">
                            <h3><a href="{{ uri_for('feed', slug=object.key.string_id()) }}">{{ object.headline }}</a></h3>
                            {% if object.subtitle %}<p>{{ object.subtitle }}</p>{% endif %}
                            <p class="details">
                                {% if object.date %}{{ _('updated') }}:&nbsp;
                                    {%- trans since=object.date|timesince %}{{ since }} ago{% endtrans -%}
                                {% else %}
                                    {{ _('Never fetched') }}
                                {% endif %}
                            </p>
                        </div>
                    </section>
                {% endif %}
            {% else %}
                <section>
                    <div class="box">
                        <h3>{{ _('No news submitted') }}, {{ _('or filter has no results') }}.</h3>
                    </div>
                </section>
            {% endfor %}
        </article>
    </div>
{% endblock %}