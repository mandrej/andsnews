{% macro form_row(field) %}
    <p>
        {{ field.label(class='required' if field.flags.required else '') }}
        {{ field(**kwargs) }}
        {% if field.errors %}
            <span class="error C_{{ field.name }}">{{ field.errors|join(', ') }}</span>
        {% endif %}
    </p>
{% endmacro %}

{% macro filter_title(filter) %}
    {% if filter %}
        {% if filter.field == 'tags' %}/ {{ filter.value }}{% endif %}
        {% if filter.field == 'date' %}/ {{ filter.value }}{% endif %}
        {% if filter.field == 'author' %}/ {{ filter.value }}{% endif %}
        {% if filter.field == 'color' %}/ {{ _(filter.value) }}{% endif %}
        {% if filter.field == 'model' %}/ {{ filter.value }}{% endif %}
        {% if filter.field == 'lens' %}/ {{ filter.value }}{% endif %}
        {% if filter.field == 'eqv' %}/ {{ filter.value }} mm{% endif %}
        {% if filter.field == 'iso' %}/ {{ filter.value }} ASA{% endif %}
        {% if filter.field == 'forkind' and filter.value == 'Photo' %}/ {{ _('for photos') }}{% endif %}
        {% if filter.field == 'forkind' and filter.value == 'Entry' %}/ {{ _('for blogs') }}{% endif %}
        {% if filter.field == 'forkind' and filter.value == 'Application' %}/ {{ _('messages') }}{% endif %}
    {% endif %}
{% endmacro %}

{% macro time(dt) %}
    <time class="when" datetime='{{ dt|to_datetime }}'>
        <span class="day">{{ dt|to_datetime("%d") }}</span>
        <span class="month">{{ dt|to_datetime("%m") }}</span>
        <span class="year">{{ dt|to_datetime("%Y") }}</span>
    </time>
{% endmacro %}

{% macro render_comment(obj, user) %}
    <div class="comment">
        {{ time(obj.date) }}
        <div class="body">
            {% if user == obj.author %}
                <a class="confirm delete fa fa-times-circle fa-2x pull-right"
                    href="{{ uri_for('delete', safe_key=obj.key.urlsafe()) }}" title="{{ _('Delete') }}"></a>
            {% endif %}
            <div class="para">{{ obj.body|safe }}</div>
            <p class="details">{{ obj.author }},&nbsp;
                {%- trans since=obj.date|timesince %}{{ since }} ago{% endtrans -%}
            </p>
        </div>
    </div>
{% endmacro %}

{% macro spinner() %}
    {%- for n in range(1, 13) %}<div class="bar{{ n }}"></div>{% endfor -%}
{% endmacro %}