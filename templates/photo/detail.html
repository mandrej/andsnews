{% extends "photo/base.html" %}
{#{% block title %}{{ super() }} - {{ object.headline }}{% endblock %}#}
{#{% block meta %}<meta name="date" content="{{ object.date|to_date }}"/>{% endblock %}#}

{% block paging %}{% endblock %}

{% block contents %}
    <div class="swiper-container swiper-parent">
        <div class="swiper-wrapper">
            {% for object in objects %}
                {% if object %}
                    <div class="swiper-slide">
                        <div class="cover lazyload" data-bg="{{ object.normal_url }}">
                            <div class="swiper-container swiper-nested">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide blank"></div>
                                    <div class="swiper-slide exif">
                                        {% include "photo/exif.html" %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script>
        $(function () {
            var index = {{ index|to_json }};

            var horizontal = $('.swiper-parent').swiper({
                mode: 'horizontal',
                keyboardControl: true,
                initialSlide: index
            });
            var vertical = $('.swiper-nested').swiper({
                mode: 'vertical',
                keyboardControl: true
            });
            $(document).on('lazybeforeunveil', function(e) {
                var $this = $(e.target);
                var url = $this.data('bg');
                if (url) $this.css('background-image', 'url(' + url + ')').removeAttr('data-bg');
            });
        });
    </script>
{% endblock %}