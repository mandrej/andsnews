{% extends "photo/base.html" %}
{% import "snippets/macros.html" as m %}
{% block title %}{{ super() }} - {{ _('Photos') }}{% endblock %}

{% block contents %}
<h2>
    <a href="{{ uri_for('photo_all') }}">{{ _('Photos') }}</a>
    {{ m.filter_title(filter) }}
</h2>

<div id="container" class="thumbnails">
    {% for object in objects %}
        {% if object %}
            {% if filter %}
                {% set url = uri_for('photo_filter', field = filter.field, value = filter.value, slug = object.key.string_id()) %}
            {% else %}
                {% set url = uri_for('photo', slug = object.key.string_id()) %}
            {% endif %}
            <figure>
                <a href="{{ url }}?idx={{ idx + loop.index }}">
                    <img src="{{ object.small_url_async.get_result() }}"/>
                    <p class="legend">{{ object.headline }}</p>
                </a>
            </figure>
        {% endif %}
    {% else %}
        <section>
            <div class="box">
                <h3>{{ _('No photos submitted') }}, {{ _('or filter has no results') }}.</h3>
            </div>
        </section>
    {% endfor %}
</div>
{% endblock %}