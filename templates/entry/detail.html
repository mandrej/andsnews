{% extends "entry/base.html" %}
{% block title %}{{ super() }} - {{ object.headline }}{% endblock %}
{% block meta %}<meta name="date" content="{{ object.date|to_date }}"/>{% endblock %}

{% block modals %}
{{ super() }}
<div id="addcomment" class="modal"></div>
{% endblock %}

{% block contents %}
    <div class="page">
        {% import "snippets/macros.html" as m %}
        <header>
            <h2>{{ object.headline }}</h2>
            <p class="subtitle">
                <i class="fa fa-user"></i>&nbsp;
                <a href="{{ uri_for('entry_filter_all', field='author', value=object.author) }}"
                    title="{{ _("author's blogs") }}">{{ object.author }}</a>,
                    <time datetime='{{ object.date|to_datetime }}'>
                        {{ object.date|to_datetime }}</time>
                {% for tag in object.tags %}
                    {% if loop.first %}&nbsp;<i class="fa fa-tags"></i>{% endif %}
                    <a href="{{ uri_for('entry_filter_all', field='tags', value=tag) }}" title="{{ tag }}">
                        {{ tag }}</a>{% if not loop.last %},{% endif %}
                {% endfor %}
                &nbsp;<i class="fa fa-clock-o"></i>&nbsp;
                <a href="{{ uri_for('entry_filter_all', field='date', value=object.year) }}"
                    title="{{ _('blogs sent same year') }}">{{ object.year }}</a>
            </p>
        </header>
        <article class="port">
            <section>
                <i class="fa fa-quote-left fa-2x pull-left"></i>
                <p>{{ object.summary|safe }}</p>
                <div class="story">{{ object.body|safe }}</div>
            </section>
            <aside>
                <div class="comments">
                    {% for comment in object.comment_list() %}
                        {{ m.render_comment(comment, user) }}
                    {% endfor %}
                </div>
                {% if user %}
                    <h3><a class="comment_add block button" href="{{ uri_for('comment_add', safe_key=object.key.urlsafe()) }}">
                        <i class="fa fa-comment"></i> {{ _('Add Comment') }}</a></h3>
                {% endif %}
            </aside>
        </article>
    </div>
{% endblock %}
{% block scripts %}
    {{ super() }}
    <script src="/static/scripts/jquery.searchhighlight.min.js"></script>
    <script src="/static/scripts/markitup/jquery.markitup.min.js"></script>
    <script src="/static/scripts/markitup/sets/cmnt.set_{{ language_code }}.min.js"></script>
{% endblock %}