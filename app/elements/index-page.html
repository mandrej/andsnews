<link rel="import" href="list-page.html">
<link rel="import" href="filter-page.html">

<dom-module id="index-page">
	<template>
		<carbon-location route="{{route}}" use-hash-as-path></carbon-location>

		<carbon-route
			route="{{route}}"
			pattern="/:kind"
			data="{{data}}"
			tail="{{tail}}"
			active="{{active}}"></carbon-route>

		<carbon-route
			route="{{tail}}"
			pattern="/:field/:value"
			data="{{dataFilter}}"
			active="{{activeFilter}}"></carbon-route>

		<iron-selector selected="{{data.kind}}" attr-for-selected="kind-page"></iron-selector>

		<neon-animated-pages class="flex" selected={{selected}}>
			<list-page
				kind="{{data.kind}}"
				field="{{dataFilter.field}}"
				value="{{dataFilter.value}}"></list-page>
			
			<filter-page kind="{{data.kind}}"></filter-page>
		</neon-animated-pages>
	</template>

	<script>
		Polymer({
			is: 'index-page',
			attached: function() {
				if (!this.route.path) {
					this.set('route.path', '/photo');
					this.kind = 'photo';
				}
				if (!this.field || !this.value) {
					this.set('dataFilter.field', '');
					this.set('dataFilter.value', '');
				}
			},
			properties: {
				selected: {
					type: Number,
					value: 0
				}
			},
			listeners: {
				'show-list': 'showList',
				'show-filters': 'showFilters'
			},
			showList: function() {
				this.selected = 0;
			},
			showFilters: function() {
				this.selected = 1;
			}
		});
	</script>
</dom-module>
