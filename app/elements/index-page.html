<link rel="import" href="elements.html">
<link rel="import" href="list-grid.html">
<link rel="import" href="list-detail.html">

<dom-module id="index-page">
	<template>
		<app-location route="{{route}}" use-hash-as-path></app-location>

		<!-- /(photo|entry|search) -->
		<app-route
			route="{{route}}"
			pattern="/:kind"
			data="{{data}}"
			tail="{{tail}}"
			active="{{active}}"></app-route>

		<app-route
			route="{{tail}}"
			pattern="/:field"
			data="{{dataField}}"
			tail="{{tailField}}"
			active="{{activeField}}"></app-route>

		<app-route
			route="{{tailField}}"
			pattern="/:value"
			data="{{dataValue}}"
			tail="{{tailValue}}"
			active="{{activeValue}}"></app-route>

		<app-scrollpos-control selected="{{view}}"></app-scrollpos-control>

		<neon-animated-pages selected="{{view}}" attr-for-selected="data-view">
			<list-grid
				data-view="grid"
				kind="{{data.kind}}"
				field="{{dataField.field}}"
	            value="{{dataValue.value}}"
				route="{{route}}"
				selected="{{selected}}"
				loading="{{loading}}"
				items="{{items}}"></list-grid>

			<list-detail
				data-view="detail"
				route="{{route}}"
				selected="[[selected]]"
				items="[[items]]"></list-detail>
		</neon-animated-pages>

	</template>

	<script>
		Polymer({
			is: 'index-page',
			attached: function() {
				if (!this.route.path) {
					this.set('route.path', '/photo');
					this.set('data.kind', 'photo');
					this.set('dataField.field', null);
					this.set('dataValue.value', null);
				}
			},
			properties: {
				view: {
					type: String,
					value: 'grid',
					notify: true
				},
				items: {
					type: Array,
					value: [],
					notify: true
				},
			}
		});
	</script>
</dom-module>
