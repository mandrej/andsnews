<link rel="import" href="list-page.html">
<link rel="import" href="filter-page.html">

<dom-module id="index-page">
	<template>
		<carbon-location route="{{route}}" use-hash-as-path></carbon-location>

		<carbon-route
			route="{{route}}"
			pattern="/:kind"
			data="{{data}}"
			tail="{{tail}}"
			active="{{active}}"></carbon-route>

		<carbon-route
			route="{{tail}}"
			pattern="/:field/:value"
			data="{{dataFilter}}"
			tail="{{tailFilter}}"
			active="{{activeFilter}}"></carbon-route>

        <list-page
            page={{page}}
            kind="{{data.kind}}"
            field="{{dataFilter.field}}"
            value="{{dataFilter.value}}"
            route="{{route}}"></list-page>
	</template>

	<script>
		Polymer({
			is: 'index-page',
			attached: function() {
				if (!this.route.path) {
					this.set('route.path', '/photo');
					this.kind = 'photo';
				}
				if (!this.field || !this.value) {
					this.set('dataFilter.field', '');
					this.set('dataFilter.value', '');
				}
			},
			properties: {
				page: { value: null, notify: true }
			}
		});
	</script>
</dom-module>
