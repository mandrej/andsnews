<link rel="import" href="list-page.html">
<link rel="import" href="filter-page.html">

<dom-module id="index-page">
	<template>
        <carbon-route
			route="{{route}}"
			pattern="/:field/:value"
			data="{{dataList}}"
			tail="{{tailList}}"
			active="{{activeList}}"></carbon-route>

		<carbon-route
			route="{{route}}"
			pattern="/filter/:token"
			data="{{dataFilter}}"
			tail="{{tailFilter}}"
			active="{{activeFilter}}"></carbon-route>

		<neon-animated-pages class="flex" selected="{{selected}}">
			<list-page
				kind="{{kind}}"
				field="{{dataList.field}}"
				value="{{dataList.value}}"
				route="{{tailList}}"
				active="{{activeList}}"></list-page>

			<filter-page
				kind="{{kind}}"
				token="{{dataFilter.token}}"
				route="{{tailFilter}}"
				active="{{activeFilter}}"></filter-page>
		</neon-animated-pages>
	</template>

	<script>
		Polymer({
			is: 'index-page',
			properties: {
				selected: {
					type: Number,
					value: 0
				},
				route: {
					type: Object,
					observer: 'objectChanged'
				}
			},
			listeners: {
				'show-index': 'showIndex',
				'show-filters': 'showFilters'
			},
			showIndex: function() {
				this.selected = 0;
			},
			showFilters: function() {
				this.selected = 1;
			},
			propertyChanged: function(newValue, oldValue) {
				console.log([oldValue || 'undefined', ' -> ', newValue].join(''));
			},
			objectChanged: function(newValue, oldValue) {
				console.log(newValue);
			}
		});
	</script>
</dom-module>
