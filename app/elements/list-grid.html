<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-ripple/paper-ripple.html">
<link rel="import" href="../styles/shared-styles.html">

<dom-module id="list-grid">
    <style is="custom-style" include="shared-styles"></style>
    <template>
        <style>
            :host {
                display: block;
            }
            .content {
                @apply(--layout-fullbleed);
                @apply(--layout-horizontal);
                @apply(--layout-start-aligned);
                @apply(--layout-wrap);
                width: 100%;
            }
            .photo {
                position: relative;
                width: 20%;
				height: 200px;
				cursor: pointer;
			}
            .photo:hover .detail { opacity: 1; }
            .photo > iron-image {
                @apply(--layout-flex);page
            }
            .photo > .detail {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.8));
                color: white;
                font-size: 20px;
                font-weight: 100;
                padding: 20px;
                opacity: 0;
                transition: opacity 0.1s;
            }
            @media (max-width: 1024px) {.photo{ width: 25%; height: 200px;} }
            @media (max-width: 848px) { .photo{ width: 33.3333333%; height: 200px;} }
            @media (max-width: 600px) { .photo{ width: 50%; height: 300px;} }
            @media (max-width: 432px) { .photo{ width: 100%; height: 350px;} }

			iron-image { width: 100%; height: 100%; }
        </style>

        <div hidden$="{{!showingPhotos}}" class="content">
            <template is="dom-repeat" items="{{items}}" index-as="index">
                <div class="photo" on-tap="_showDetail">
                    <iron-image src="{{item.serving_url}}=s0" sizing="cover"></iron-image>
                    <div class="detail">[[item.headline]]</div>
                    <paper-ripple></paper-ripple>
                </div>
            </template>
        </div>
        <div hidden$="{{showingPhotos}}" class="content">
            <template is="dom-repeat" items="{{items}}" index-as="index">
                <paper-card heading="[[item.headline]]" on-tap="_showDetail" elevation="0" animated-shadow="false">
                    <div class="card-content">
                        [[item.summary]]
                    </div>
                    <paper-ripple></paper-ripple>
                </paper-card>
            </template>
        </div>

    </template>
    <script>
        Polymer({
            is: 'list-grid',
            properties: {
                items: {
                    type: Array,
                    value: []
                },
                selected: {
                    type: Number,
                    value: 0,
                    notify: true
                },
                showingPhotos: {
                    computed: '_showingPhotos(kind)',
                    notify: true
                },
            },
            _showingPhotos: function(kind) {
                return kind == 'photo';
            },
            _showDetail: function(e) {
                this.selected = e.model.index;
                this.fire('show-detail');
            }
        });
    </script>
</dom-module>
