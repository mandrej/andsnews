<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<link rel="import" href="shared-styles.html">

<dom-module id="app-search">
  <template>
    <style include="shared-styles">
      :host {
        width: 100%;
      }
      paper-input {
        width: 100%;
      }
      iron-icon {
        margin: 10px 10px 0 0;
        color: var(--primary-text-color);
      }
    </style>

    <div class="layout horizontal">
      <iron-icon icon="app:search" class="self-center"></iron-icon>
      <paper-input id="inputSearch" class="self-center" placeholder="search" no-label-float value="{{search::value-changed}}"></paper-input>
    </div>
  </template>

  <script>
    Polymer({
      is: 'app-search',
      behaviors: [
        Polymer.IronA11yKeysBehavior
      ],
      properties: {
        search: { type: String, value: null, notify: true },
        keyEventTarget: {
          type: Object,
          value: function () {
            return this.$.inputSearch;
          }
        },
      },
      keyBindings: {
        'enter': 'onSearch',
      },
      onSearch: function () {
        if (this.search) {
          this.field = this.search;
          this.search = null;
          this.value = null;
          this.set('route.path', '/detail/search/' + this.field);
        }

      },
      propertyChanged: function (newValue, oldValue) {
        console.log([oldValue || 'undefined', ' -> ', newValue].join(''));
      },
    });
  </script>
</dom-module>
