<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-a11y-keys/iron-a11y-keys.html">
<!-- <link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html"> -->
<link rel="import" href="../bower_components/paper-input/paper-input.html">

<dom-module id="app-search">
    <template>
        <style>
            :host {
                display: block;
            }
            paper-input {
                width: 160px;
            }
        </style>

        <iron-a11y-keys target="[[targetSearch]]" keys="enter" on-keys-pressed="_onSearch"></iron-a11y-keys>
        <!-- <paper-icon-button icon="search"></paper-icon-button> -->
        <paper-input id="inputSearch" placeholder="search" no-label-float
            value="{{search::value-changed}}"></paper-input>
    </template>
    <script>
        Polymer({
            is: 'app-search',
            properties: {
                field: { type: String, value: null, notify: true },
				value: { type: String, value: null, notify: true },
                search: { type: String, value: null, notify: true },
                targetSearch: {
					type: Object,
					value: function() {
						return this.$.inputSearch;
					}
				},
            },
            _onSearch: function() {
                this.field = this.search;
                this.search = null;
                this.value = null;
                this.set('route.path', '/detail/search/' + this.field);
			},
            propertyChanged: function(newValue, oldValue) {
				console.log([oldValue || 'undefined', ' -> ', newValue].join(''));
			},
        });
    </script>
</dom-module>
